<div class="dashboard-container">
  <div class="container">
    <h2>ğŸ“Š Dashboard</h2>

    <!-- Error Alert -->
    <div *ngIf="error" class="alert alert-danger">
      {{ error }}
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading">
      <div class="spinner"></div>
      Memuat statistik...
    </div>

    <!-- Stats Grid -->
    <div *ngIf="!loading" class="stats-grid">
      <!-- Total Employees Card -->
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <h3>{{ stats.totalEmployees || 0 }}</h3>
          <p>Total Karyawan</p>
        </div>
      </div>

      <!-- Active Employees Card -->
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <h3>{{ stats.activeEmployees || 0 }}</h3>
          <p>Karyawan Aktif</p>
        </div>
      </div>

      <!-- Inactive Employees Card -->
      <div class="stat-card">
        <div class="stat-icon">â¸ï¸</div>
        <div class="stat-content">
          <h3>{{ stats.inactiveEmployees || 0 }}</h3>
          <p>Karyawan Nonaktif</p>
        </div>
      </div>

      <!-- Total Departments Card -->
      <div class="stat-card">
        <div class="stat-icon">ğŸ¢</div>
        <div class="stat-content">
          <h3>{{ stats.totalDepartments || 0 }}</h3>
          <p>Total Departemen</p>
        </div>
      </div>

      <!-- Total Positions Card -->
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Œ</div>
        <div class="stat-content">
          <h3>{{ stats.totalPositions || 0 }}</h3>
          <p>Total Posisi</p>
        </div>
      </div>

      <!-- Total Users Card -->
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¤</div>
        <div class="stat-content">
          <h3>{{ stats.totalUsers || 0 }}</h3>
          <p>Total Pengguna Sistem</p>
        </div>
      </div>

      <!-- Today Attendance Card -->
      <div class="stat-card">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-content">
          <h3>{{ stats.todayAttendance || 0 }}</h3>
          <p>Absensi Hari Ini</p>
        </div>
      </div>

      <!-- Pending Leaves Card -->
      <div class="stat-card">
        <div class="stat-icon">ğŸ–ï¸</div>
        <div class="stat-content">
          <h3>{{ stats.pendingLeaves || 0 }}</h3>
          <p>Cuti Menunggu Persetujuan</p>
        </div>
      </div>
    </div>

    <!-- Welcome Section -->
    <div class="welcome-section" *ngIf="!loading">
      <h3>Selamat Datang di Sistem Administrasi Kepegawaian</h3>
      <p>Gunakan menu di atas untuk mengelola data karyawan, absensi, cuti, departemen, posisi, dan pengguna sistem.</p>

      <div class="quick-links">
        <a routerLink="/dashboard/employees" class="quick-link">
          <span>ğŸ‘¥</span>
          <strong>Kelola Karyawan</strong>
        </a>
        <a routerLink="/dashboard/attendance" class="quick-link">
          <span>ğŸ“‹</span>
          <strong>Catat Absensi</strong>
        </a>
        <a routerLink="/dashboard/leaves" class="quick-link">
          <span>ğŸ–ï¸</span>
          <strong>Kelola Cuti</strong>
        </a>
        <a routerLink="/dashboard/departments" class="quick-link">
          <span>ğŸ¢</span>
          <strong>Departemen</strong>
        </a>
      </div>
    </div>

    <!-- Latest Employees -->
    <div class="mt-4">
      <h4>Terbaru: Pegawai</h4>
      <div *ngIf="loadingRecent" class="loading">
        <div class="spinner"></div>
        Memuat data pegawai...
      </div>
      <div *ngIf="!loadingRecent">
        <table class="table" *ngIf="recentEmployees.length > 0">
          <thead>
            <tr>
              <th>NIP</th>
              <th>Nama</th>
              <th>Departemen</th>
              <th>Posisi</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let e of recentEmployees">
              <td>{{ e.nip }}</td>
              <td>{{ e.name }}</td>
              <td>{{ e.department?.name || e.department || '-' }}</td>
              <td>{{ e.position?.title || e.position || '-' }}</td>
              <td>{{ e.status || '-' }}</td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="recentEmployees.length === 0" class="table-empty">Belum ada pegawai terbaru.</div>
      </div>
    </div>
  </div>
</div>
